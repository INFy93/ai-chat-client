<template>
  <div class="min-h-screen bg-gray-900 text-white p-4">
    <h1 class="text-2xl font-bold mb-4">üåßÔ∏è –ù–∞–≤–∏—è –≤—Å—Ç—Ä–µ—á–∞–µ—Ç —Ç–µ–±—è...</h1>
    <div class="bg-gray-800 p-4 rounded mb-4 max-w-xl">
      <p>{{ greeting }}</p>
    </div>
    <input v-model="userMessage" class="w-full p-2 rounded text-black" placeholder="–ù–∞–ø–∏—à–∏ —á—Ç–æ-–Ω–∏–±—É–¥—å..." @keydown.enter="sendMessage" />
  </div>
</template>

<script setup>
import { ref } from 'vue'

const greeting = `–¢—ã –∏–¥—ë—à—å –ø–æ –º–æ–∫—Ä–æ–π –∞–ª–ª–µ–µ. –ì–¥–µ-—Ç–æ —Ä—è–¥–æ–º ‚Äî —à–µ–ª–µ—Å—Ç –ª–∏—Å—Ç–≤—ã –∏ —Ç—è–∂—ë–ª—ã–µ –∫–∞–ø–ª–∏. –ò–∑ —Ç–µ–º–Ω–æ—Ç—ã —Å–ª—ã—à–∏—Ç—Å—è –≥–æ–ª–æ—Å... "–≠–π... —Ç—ã –≤ –ø–æ—Ä—è–¥–∫–µ?"`

const userMessage = ref('')
async function sendMessage() {
  const message = userMessage.value.trim()
  if (!message) return

  try {
    const res = await fetch('https://ai-chat-server-dod9.onrender.com/chat', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ message })
    })
    const data = await res.json()
    alert(`–ù–∞–≤–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç: ${data.reply}`)
  } catch (err) {
    console.error(err)
    alert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É")
  }

  userMessage.value = ''
}

</script>
